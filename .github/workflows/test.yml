name: Teste Simples de Chave

on: [workflow_dispatch]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
      - name: Verificar se secret existe
        run: |
          if [ -z "${{ secrets.TMDB_API_KEY }}" ]; then
            echo "❌ Secret TMDB_API_KEY NÃO está configurado!"
            exit 1
          else
            echo "✅ Secret TMDB_API_KEY está configurado"
            
            # Mostrar apenas comprimento (não o valor)
            LENGTH=${#TMDB_KEY}
            echo "Comprimento da chave: $LENGTH"
            
            if [ $LENGTH -eq 32 ]; then
              echo "✅ Tamanho correto (32 caracteres)"
            else
              echo "❌ Tamanho errado: $LENGTH (deveria ser 32)"
              exit 1
            fi
          fi
        env:
          TMDB_KEY: ${{ secrets.TMDB_API_KEY }}
